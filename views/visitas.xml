<odoo>
  <data>

    <record id="visitas_calendar" model="ir.ui.view">
            <field name="name">Visita</field>
            <field name="model">mediges.visitas</field>
            <field name="priority" eval="1"/>
            <field name="arch" type="xml">
                <calendar string="Visitas" date_start="fecha_visita_inicio" date_stop="fecha_visita_termino"
                color="tipo_visita_id">
                    <field name="paciente"/>
                    <field name="tipo_visita_id"/>

                </calendar>
            </field>
    </record>

    <record model="ir.actions.act_window" id="visitas_list_action">
            <field name="name">Visitas</field>
            <field name="res_model">mediges.visitas</field>
            <field name="view_id" ref="visitas_calendar"/>
            <field name="view_mode">calendar,tree,form</field>
    </record>

    <record model="ir.ui.view" id="visitas_tree_view">
            <field name="name">Screening</field>
            <field name="model">mediges.visitas</field>
            <field name="arch" type="xml">
                <tree string="Screening">
                    <field name="paciente"/>
                    <field name="tipo_visita_id"/>
                    <field name="create_uid" string="Creada por"/>
                    <field name="create_date" string="Creada el"/>
                    <field name="write_uid" string="Modificada por"/>
                    <field name="write_date" string="Modificada el"/>
                </tree>
            </field>
    </record>

    <record model="ir.ui.view" id="visitas_form_view">
        <field name="name">Screening</field>
        <field name="model">mediges.visitas</field>
        <field name="arch" type="xml">
          <form string="Visita">
            <sheet>
              <group string="Paciente" >
                <field name="paciente" domain="[('is_company','=',False),('name','!=','Administrator')]" />
                <field name="numero_paciente"/>
                <field name="fecha_nacimiento"/>
                <field name="edad"/>
                <field name="demografia"/>
                <field name="sexo"/>
              </group>
              <group string="Visita">
                <field name="tipo_visita_id"/>
                <field name="fecha_visita_inicio"/>
                <field name="fecha_visita_termino"/>
                <br/>
              </group>
              <group string="Consentimiento" attrs="{'invisible': [('tipo_visita_id','!=', 1)]}">
                <field name="consentimiento" widget="radio"/>
                  <field name="consentimiento_id"  />
                <br/>
                <field name="consentimiento_desde"/>
                <field name="consentimiento_hasta"/>
                  <br/>
                <field name="criterios_exclusion" widget="radio"/>
                  <br/>
              </group>
              <group string="Criterios Exclusion" attrs="{'invisible': [('tipo_visita_id','!=', 1)
               ,('tipo_visita_id', '!=', 2)]}">
                <field name="criterios_exclusion" widget="radio"/>
                <br/>
              </group>

              <group string="Signos Vitales" attrs="{'invisible': [('tipo_visita_id','!=', 1)
               ,('tipo_visita_id', '!=', 2)]}">
                <field name="estatura" placeholder="en cm."/>
                  <br/>
                <field name="peso" placeholder="en kgs."/>
                  <br/>
                <field name="imc"/>
                  <br/>
                <field name="signos_vitales_id"  >
                    <tree string="Signos Vitales" editable="bottom">
                        <field name="tipo_signo_vital"/>

                        <field name="valor" witget="Interger"/>

                    </tree>
                </field>
                  <br/>
              </group>
              <group string="Examen Fisico" attrs="{'invisible': [('tipo_visita_id','!=', 1)]}">
                <field name="visitas_indicadores_id"/>
              </group>
              <group string="COVID" attrs="{'invisible': [('tipo_visita_id','!=', 1)]}">
                  <field name="covid" widget="radio"/>
                   <br/>
                  <field name="examen_covid" widget="radio"/>
              </group>
              <group string="Riesgo de embarazo" attrs="{'invisible': [('tipo_visita_id','!=', 1)]}">
                  <field name="prueba_embaraso" widget="radio"/>
                  <br/>
                  <field name="edad_fertil" widget="radio"/>
                  <br/>
                  <field name="riesgo_de_embarazo" widget="radio"/>
                  <field name="anticoncepcion_id" >
                    <tree string="Anticoncepcion" editable="bottom">
                        <field name="tipo_anticoncepcion_id"/>
                        <field name="cuando" witget="Interger"/>
                        <field name="cual"/>
                    </tree>
                  </field>
              </group>
              <group string="Historial Medico" attrs="{'invisible': [('tipo_visita_id','!=', 1)]}">
                  <field name="enfermedades_id"/>
              </group>
                <!-- BEGIN RANDO  -->
              <group string="Cuestionario" attrs="{'invisible': [('tipo_visita_id','!=', 2)]}">
                  <br/>
                  <field name="cuestionario_de_mru" widget="radio"/>
                  <br/>
                  <field name="sintomas_previos" widget="radio"/>
                  <br/>
                  <field name="numero_kit_rando" />
                  <br/>
                  <field name="muestra_sangre_arnsec" widget="radio"/>
                  <br/>
                  <field name="muestras_nasales_sars" widget="radio"/>
                  <br/>
                  <field name="capacitacion_ecoa" widget="radio"/>
                  <br/>
                  <field name="formulario_macov" widget="radio"/>
                  <br/>
                  <field name="entrega_kit_hisopado_nasal" widget="radio"/>
                  <br/>
                  <field name="sintomas_covid" widget="radio"/>
                  <br/>
                  <field name="vigilancia_sintomas_covid" widget="radio"/>
                  <br/>
                  <field name="inmunogenia_humoral" widget="radio"/>
              </group>
              <group string="VacunaciÃ³n" attrs="{'invisible': [('tipo_visita_id','!=', 2)]}">
                  <br/>
                  <field name="sintomas_vacunacion" widget="radio"/>
                  <br/>
                  <field name="fecha_vacunacion"/>
                  <br/>
                  <field name="sitio_vacunacion_id"/>
                  <br/>
                  <field name="reaccion_vacunacion_id" widget="many2many_tags" />
                  <br/>
                  <field name="observacion_vacunacion" widget="radio"/>

              </group>
            <!-- END RANDO  -->

            </sheet>
            <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"/>
                <field name="message_ids" widget="mail_thread"/>
            </div>
          </form>
        </field>
    </record>



      <record model="ir.actions.act_window.view" id="visitas_screening_tree_view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="visitas_tree_view"/>
        <field name="act_window_id" ref="visitas_list_action"/>
    </record>

      <record model="ir.actions.act_window.view" id="screening_form_view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="visitas_form_view"/>
        <field name="act_window_id" ref="visitas_list_action"/>
     </record>

  </data>
</odoo>
