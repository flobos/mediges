<odoo>
    <data>


    <record model="ir.actions.act_window" id="horasmedicas_list_action">
            <field name="name">Horas Medicas</field>
            <field name="res_model">mediges.horasmedicas</field>
            <field name="view_mode">calendar,tree,form</field>
        </record>

    <record model="ir.ui.view" id="horas_tree_view">
            <field name="name">Horas Medicas</field>
            <field name="model">mediges.horasmedicas</field>
            <field name="arch" type="xml">

                <tree string="Horas Medica">
                    <field name="company"/>
                    <field name="paciente"/>
                    <field name="tipo_prestacion"/>
                    <field name="forma_de_pago"/>
                    <field name="fecha_solicitud_hora"/>
                    <field name="fecha_solicitud_hora_termino"/>
                    <field name="state"/>
                    <field name="create_uid"/>
                    <field name="create_date"/>

                </tree>
            </field>
    </record>


    <record model="ir.ui.view" id="horas_form_view">
            <field name="name">Horas Medicas</field>
            <field name="model">mediges.horasmedicas</field>
            <field name="arch" type="xml">
              <form string="Horas Medicas">
                  <header>

                      <button string="Confirmar" type="object" name="btn_confirma_hora" states="draft" class="oe_highlight"  />
                      <button string="Pagada" type="object" name="btn_paga_hora" states="confirmed" class="oe_highlight"  />
                      <button string="Finalizar" type="object" name="btn_finaliza_hora" states="pagada" class="oe_highlight"  />
                     <field name="state" widget="statusbar" string="Estado PM"/>
                  </header>
                  <sheet>
                      <group string="Datos Hora Medica">
                            <field name="company"/>
                            <field name="tipo_prestacion" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="valor_prestacion" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="paciente" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="fecha_solicitud_hora" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="fecha_solicitud_hora_termino" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="forma_de_pago" domain="[('company_id','=',company)]"/>
                      </group>
                      <group string="Pago Prestación">
                            <field name="id_ventas"/>

                      </group>

                  </sheet>
                  <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                   </div>
                </form>
            </field>
    </record>

    <record id="horas_calendar" model="ir.ui.view">
            <field name="name">Horas Medicas</field>
            <field name="model">mediges.horasmedicas</field>
            <field name="arch" type="xml">
                <calendar string="Horas Medica" date_start="fecha_solicitud_hora" date_stop="fecha_solicitud_hora_termino" color="state">
                    <field name="paciente"/>

                </calendar>
            </field>
    </record>



    <record id="horasmedicas_doctor_list_action" model="ir.actions.act_window">
            <field name="name">Visitas Medicas</field>
            <field name="res_model">mediges.horasmedicas</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
    </record>

     <record model="ir.ui.view" id="horasdoctor_tree_view">
                <field name="name">Visitas</field>
                <field name="model">mediges.horasmedicas</field>
                <field name="arch" type="xml">
                    <tree string="Visitas">
                        <field name="fecha_solicitud_hora"/>
                        <field name="fecha_solicitud_hora_termino"/>
                        <field name="paciente"/>
                        <field name="tipo_prestacion"/>
                        <field name="forma_de_pago"/>
                        <field name="state"/>
                        <field name="create_uid"/>
                        <field name="create_date"/>
                        <field name="company"/>
                    </tree>
                </field>
     </record>


    <record model="ir.actions.act_window.view" id="action_horasdoctor_tree_view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="horasdoctor_tree_view"/>
        <field name="act_window_id" ref="horasmedicas_doctor_list_action"/>
    </record>

    <record model="ir.ui.view" id="horas_doctor_form_view">
            <field name="name">Visita</field>
            <field name="model">mediges.horasmedicas</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form string="Horas Medicas">
                  <header>
                     <field name="state" widget="statusbar" string="Estado Visita"/>
                  </header>
                  <sheet>
                      <group>
                          <group string="Datos Pacientes">
                            <field name="company" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="paciente" attrs="{'readonly':[('state','!=','draft')]}" />
                            <field name="tipo_prestacion" attrs="{'readonly':[('state','!=','draft')]}" />
                            <field name="valor_prestacion" attrs="{'readonly':[('state','!=','draft')]}" />
                            <field name="historial" />

                          </group>
                          <group string="Datos Visita">
                            <field name="fecha_solicitud_hora" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="fecha_solicitud_hora_termino" attrs="{'readonly':[('state','!=','draft')]}" />
                            <field name="diagnostico" />
                            <field name="Observacion" />
                          </group>
                      </group>
                      <group string="Prescripción">
                            <field name="prescricion_id">
                                <tree string="Productos" editable="bottom">
                                    <field name="medicamento_id"/>
                                    <field name="cantidad" witget="Interger"/>
                                    <field name="tipo_unidad"/>
                                    <field name="periodo"/>
                                </tree>
                            </field>
                      </group>

                  </sheet>
                  <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                   </div>
                </form>
            </field>
    </record>


    <record model="ir.actions.act_window.view" id="action_horas_doctor_form_view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="horas_doctor_form_view"/>
        <field name="act_window_id" ref="horasmedicas_doctor_list_action"/>
    </record>




    </data>
</odoo>